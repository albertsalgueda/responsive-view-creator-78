
import { ReactNode } from "react";

interface VideoMaskProps {
  index: number;
  maskCount: number;
  gapSize: number;
  children: ReactNode;
  onClick: () => void;
}

const VideoMask = ({ index, maskCount, gapSize, children, onClick }: VideoMaskProps) => {
  // Convert gapSize from pixels to vh units for consistent calculations
  const gapSizeVh = (gapSize / window.innerHeight) * 100;
  const totalGapHeight = (maskCount - 1) * gapSizeVh;
  
  // Calculate max height as vh-100 minus 112px (converted to vh)
  const maxHeightPx = window.innerHeight - 112;
  const maxHeightVh = (maxHeightPx / window.innerHeight) * 100;
  
  // Adjust mask height based on maxHeightVh and maintain proportional distribution
  const availableHeight = Math.min(100, maxHeightVh);
  const adjustedMaskHeight = (availableHeight - totalGapHeight) / maskCount;
  
  return (
    <div 
      className="absolute w-full overflow-hidden"
      style={{
        height: `${adjustedMaskHeight}vh`,
        bottom: `${index * (adjustedMaskHeight + gapSizeVh)}vh`,
        backgroundColor: '#FDB0C2',
        maxHeight: 'calc(100vh - 112px)',
        WebkitMaskImage: `url("data:image/svg+xml,%3Csvg width='79' height='35' viewBox='0 0 79 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M60.7529 34.8353V0H68.3669C70.1585 0 71.8007 0.447882 73.2936 1.34365C74.7866 2.20624 75.9643 3.384 76.8269 4.87694C77.7227 6.33671 78.1706 7.97894 78.1706 9.80365V15.6261C78.1706 16.4887 77.9549 17.6167 77.5236 19.0101C77.0923 20.3704 76.2795 21.5979 75.0852 22.6927V23.4392L78.1706 34.8353H70.7059L68.6158 25.2307H68.1679V34.8353H60.7529ZM68.1679 18.8111H68.566C69.1632 18.8111 69.6608 18.6452 70.0589 18.3134C70.4902 17.9485 70.7059 17.0527 70.7059 15.6261V9.65435C70.7059 8.26094 70.4902 7.38177 70.0589 7.01682C69.6608 6.65188 69.1632 6.46941 68.566 6.46941H68.1679V18.8111Z' fill='black'/%3E%3Cpath d='M40.3329 34.8353V0H47.7478V9.95294H48.2455L50.2858 0H57.7505V0.995296L52.7741 15.1285V15.8749L57.7505 33.84V34.8353H50.2858L48.2455 24.0861H47.7478V34.8353H40.3329Z' fill='black'/%3E%3Cpath d='M37.8306 8.70883C37.8306 10.3013 37.4491 11.7611 36.686 13.0881C35.8898 14.4152 34.8447 15.4768 33.5508 16.2731C32.2238 17.0361 30.7474 17.4177 29.1218 17.4177H8.70882C7.08318 17.4177 5.62341 17.0361 4.32953 16.2731C3.00247 15.4768 1.95741 14.4152 1.19435 13.0881C0.398116 11.7611 6.96091e-08 10.3013 0 8.70883C-6.96091e-08 7.11636 0.398116 5.65659 1.19435 4.32953C1.95741 3.00247 3.00247 1.95741 4.32953 1.19436C5.62341 0.39812 7.08318 8.75915e-07 8.70882 8.04855e-07L29.1218 0C30.7474 -7.10593e-08 32.2238 0.398119 33.5508 1.19435C34.8447 1.95741 35.8898 3.00247 36.686 4.32953C37.4491 5.65659 37.8306 7.11635 37.8306 8.70883ZM31.2617 8.70883C31.2617 8.34389 31.1455 8.0453 30.9133 7.81306C30.6479 7.58083 30.3493 7.46471 30.0175 7.46471L7.76329 7.46471C7.39835 7.46471 7.09977 7.58083 6.86753 7.81306C6.60212 8.0453 6.46941 8.34389 6.46941 8.70883C6.46941 9.07377 6.60212 9.38894 6.86753 9.65436C7.09977 9.88659 7.39835 10.0027 7.76329 10.0027L30.0175 10.0027C30.3493 10.0027 30.6479 9.88659 30.9133 9.65436C31.1455 9.38894 31.2617 9.07377 31.2617 8.70883Z' fill='black'/%3E%3Cpath d='M30.9132 34.8145H37.3329V20.42H0.497559V28.3995L7.06179 34.8145H14.5312V32.8286L9.86544 27.8145H30.9132V34.8145Z' fill='black'/%3E%3C/svg%3E")`,
        maskImage: `url("data:image/svg+xml,%3Csvg width='79' height='35' viewBox='0 0 79 35' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M60.7529 34.8353V0H68.3669C70.1585 0 71.8007 0.447882 73.2936 1.34365C74.7866 2.20624 75.9643 3.384 76.8269 4.87694C77.7227 6.33671 78.1706 7.97894 78.1706 9.80365V15.6261C78.1706 16.4887 77.9549 17.6167 77.5236 19.0101C77.0923 20.3704 76.2795 21.5979 75.0852 22.6927V23.4392L78.1706 34.8353H70.7059L68.6158 25.2307H68.1679V34.8353H60.7529ZM68.1679 18.8111H68.566C69.1632 18.8111 69.6608 18.6452 70.0589 18.3134C70.4902 17.9485 70.7059 17.0527 70.7059 15.6261V9.65435C70.7059 8.26094 70.4902 7.38177 70.0589 7.01682C69.6608 6.65188 69.1632 6.46941 68.566 6.46941H68.1679V18.8111Z' fill='black'/%3E%3Cpath d='M40.3329 34.8353V0H47.7478V9.95294H48.2455L50.2858 0H57.7505V0.995296L52.7741 15.1285V15.8749L57.7505 33.84V34.8353H50.2858L48.2455 24.0861H47.7478V34.8353H40.3329Z' fill='black'/%3E%3Cpath d='M37.8306 8.70883C37.8306 10.3013 37.4491 11.7611 36.686 13.0881C35.8898 14.4152 34.8447 15.4768 33.5508 16.2731C32.2238 17.0361 30.7474 17.4177 29.1218 17.4177H8.70882C7.08318 17.4177 5.62341 17.0361 4.32953 16.2731C3.00247 15.4768 1.95741 14.4152 1.19435 13.0881C0.398116 11.7611 6.96091e-08 10.3013 0 8.70883C-6.96091e-08 7.11636 0.398116 5.65659 1.19435 4.32953C1.95741 3.00247 3.00247 1.95741 4.32953 1.19436C5.62341 0.39812 7.08318 8.75915e-07 8.70882 8.04855e-07L29.1218 0C30.7474 -7.10593e-08 32.2238 0.398119 33.5508 1.19435C34.8447 1.95741 35.8898 3.00247 36.686 4.32953C37.4491 5.65659 37.8306 7.11635 37.8306 8.70883ZM31.2617 8.70883C31.2617 8.34389 31.1455 8.0453 30.9133 7.81306C30.6479 7.58083 30.3493 7.46471 30.0175 7.46471L7.76329 7.46471C7.39835 7.46471 7.09977 7.58083 6.86753 7.81306C6.60212 8.0453 6.46941 8.34389 6.46941 8.70883C6.46941 9.07377 6.60212 9.38894 6.86753 9.65436C7.09977 9.88659 7.39835 10.0027 7.76329 10.0027L30.0175 10.0027C30.3493 10.0027 30.6479 9.88659 30.9133 9.65436C31.1455 9.38894 31.2617 9.07377 31.2617 8.70883Z' fill='black'/%3E%3Cpath d='M30.9132 34.8145H37.3329V20.42H0.497559V28.3995L7.06179 34.8145H14.5312V32.8286L9.86544 27.8145H30.9132V34.8145Z' fill='black'/%3E%3C/svg%3E")`,
        WebkitMaskSize: 'contain',
        maskSize: 'contain',
        WebkitMaskRepeat: 'no-repeat',
        maskRepeat: 'no-repeat',
        WebkitMaskPosition: 'bottom center',
        maskPosition: 'bottom center',
        cursor: `url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='1' y='1' width='118' height='118' stroke='%23FDB0C2' stroke-width='2'/%3E%3Cpath d='M50.3927 55.116C50.4047 55.056 50.4287 55.008 50.4647 54.972C50.5127 54.924 50.5667 54.9 50.6267 54.9H53.1107C53.1707 54.9 53.2187 54.924 53.2547 54.972C53.2907 55.008 53.3027 55.056 53.2907 55.116L51.7967 67.284C51.7847 67.344 51.7547 67.398 51.7067 67.446C51.6707 67.482 51.6227 67.5 51.5627 67.5H49.1867C49.0667 67.5 48.9887 67.452 48.9527 67.356L45.7847 60.48C45.7607 60.444 45.7367 60.432 45.7127 60.444C45.6887 60.444 45.6767 60.468 45.6767 60.516L44.8667 67.284C44.8547 67.344 44.8247 67.398 44.7767 67.446C44.7407 67.482 44.6927 67.5 44.6327 67.5H42.1487C42.0887 67.5 42.0407 67.482 42.0047 67.446C41.9687 67.398 41.9567 67.344 41.9687 67.284L43.4627 55.116C43.4627 55.056 43.4867 55.008 43.5347 54.972C43.5827 54.924 43.6367 54.9 43.6967 54.9H46.0907C46.1987 54.9 46.2707 54.948 46.3067 55.044L49.4747 61.902C49.4867 61.938 49.5047 61.956 49.5287 61.956C49.5527 61.944 49.5707 61.914 49.5827 61.866L50.3927 55.116ZM62.3915 62.028C62.4035 62.388 62.3675 62.862 62.2835 63.45C62.2475 63.594 62.1575 63.666 62.0135 63.666H56.7035C56.6315 63.666 56.5955 63.696 56.5955 63.756C56.6075 63.936 56.6435 64.11 56.7035 64.278C56.8115 64.53 56.9975 64.734 57.2615 64.89C57.5255 65.046 57.8615 65.124 58.2695 65.124C58.9895 65.124 59.5955 64.878 60.0875 64.386C60.1355 64.326 60.1895 64.296 60.2495 64.296C60.2975 64.296 60.3395 64.32 60.3755 64.368L61.5275 65.952C61.5635 65.988 61.5815 66.03 61.5815 66.078C61.5815 66.126 61.5515 66.18 61.4915 66.24C61.0355 66.696 60.4895 67.044 59.8535 67.284C59.2295 67.524 58.5635 67.644 57.8555 67.644C56.7995 67.644 55.9295 67.41 55.2455 66.942C54.5615 66.462 54.1055 65.796 53.8775 64.944C53.7695 64.548 53.7155 64.122 53.7155 63.666C53.7155 63.414 53.7335 63.144 53.7695 62.856C53.8415 62.196 54.0155 61.542 54.2915 60.894C54.6995 60.006 55.2815 59.31 56.0375 58.806C56.8055 58.29 57.6635 58.032 58.6115 58.032C59.3795 58.032 60.0455 58.206 60.6095 58.554C61.1735 58.89 61.6055 59.364 61.9055 59.976C62.2175 60.576 62.3795 61.26 62.3915 62.028ZM58.2875 60.606C57.6995 60.606 57.2615 60.9 56.9735 61.488C56.9375 61.572 56.8955 61.698 56.8475 61.866C56.8235 61.926 56.8415 61.956 56.9015 61.956H59.3855C59.4455 61.956 59.4755 61.926 59.4755 61.866C59.4755 61.782 59.4635 61.668 59.4395 61.524C59.3915 61.224 59.2655 60.996 59.0615 60.84C58.8695 60.684 58.6115 60.606 58.2875 60.606ZM62.227 67.5C62.131 67.5 62.083 67.458 62.083 67.374C62.083 67.326 62.101 67.278 62.137 67.23L65.467 62.892C65.491 62.856 65.491 62.82 65.467 62.784L63.217 58.464C63.193 58.416 63.181 58.38 63.181 58.356C63.181 58.308 63.199 58.272 63.235 58.248C63.271 58.212 63.313 58.194 63.361 58.194H66.043C66.151 58.194 66.223 58.242 66.259 58.338L67.321 60.48C67.345 60.516 67.369 60.534 67.393 60.534C67.417 60.534 67.435 60.516 67.447 60.48L69.031 58.338C69.103 58.242 69.193 58.194 69.301 58.194H72.145C72.241 58.194 72.289 58.236 72.289 58.32C72.289 58.356 72.271 58.404 72.235 58.464L68.905 62.784C68.893 62.82 68.893 62.856 68.905 62.892L71.155 67.23C71.179 67.278 71.191 67.314 71.191 67.338C71.191 67.386 71.173 67.428 71.137 67.464C71.101 67.488 71.059 67.5 71.011 67.5H68.329C68.221 67.5 68.149 67.452 68.113 67.356L67.051 65.214C67.039 65.178 67.021 65.16 66.997 65.16C66.973 65.16 66.949 65.178 66.925 65.214L65.323 67.356C65.263 67.452 65.179 67.5 65.071 67.5H62.227ZM78.6609 60.372C78.6609 60.432 78.6369 60.486 78.5889 60.534C78.5409 60.57 78.4869 60.588 78.4269 60.588H76.8429C76.7829 60.588 76.7529 60.618 76.7529 60.678L76.3389 63.954C76.3269 64.014 76.3209 64.098 76.3209 64.206C76.3209 64.722 76.5549 64.98 77.0229 64.98H77.6709C77.7309 64.98 77.7789 65.004 77.8149 65.052C77.8509 65.088 77.8629 65.136 77.8509 65.196L77.5989 67.284C77.5749 67.416 77.4969 67.494 77.3649 67.518C76.7889 67.542 76.3749 67.554 76.1229 67.554C75.1989 67.554 74.5089 67.422 74.0529 67.158C73.6089 66.894 73.3869 66.402 73.3869 65.682C73.3869 65.586 73.3989 65.418 73.4229 65.178L73.9629 60.678C73.9869 60.618 73.9629 60.588 73.8909 60.588H72.9009C72.8409 60.588 72.7929 60.57 72.7569 60.534C72.7209 60.486 72.7089 60.432 72.7209 60.372L72.9549 58.41C72.9669 58.35 72.9909 58.302 73.0269 58.266C73.0749 58.218 73.1289 58.194 73.1889 58.194H74.1789C74.2509 58.194 74.2869 58.164 74.2869 58.104L74.5569 55.926C74.5689 55.866 74.5929 55.818 74.6289 55.782C74.6769 55.734 74.7309 55.71 74.7909 55.71H77.1489C77.2089 55.71 77.2569 55.734 77.2929 55.782C77.3289 55.818 77.3409 55.866 77.3289 55.926L77.0589 58.104C77.0589 58.164 77.0829 58.194 77.1309 58.194H78.7329C78.7929 58.194 78.8409 58.218 78.8769 58.266C78.9129 58.302 78.9249 58.35 78.9129 58.41L78.6609 60.372Z' fill='%23FDB0C2'/%3E%3C/svg%3E") 60 60, pointer`,
        aspectRatio: 'auto',
      }}
      onClick={onClick}
    >
      <div className="w-full h-full relative">
        {children}
      </div>
    </div>
  );
};

export default VideoMask;
